<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Zoom-like App</title>

  <!-- Add your custom CSS files -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="/css/index.css">
  <link rel="stylesheet" href="/css/styles.css">
  <!-- Add Bootstrap CSS (version 5.3.1) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
 <!-- Add Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <style>
    /* Add your custom styles here */
    body {
      background-color: #f0f0f0;
    }
    .underlined-link {
      text-decoration: underline;
      color: blue; /* You can change the link color */
    }
    /* Main Content */
    .meetings-list {
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
    }

    .meeting-item {
      margin-bottom: 20px;
      padding: 10px;
      background-color: #f0f0f0;
      border-radius: 4px;
    }

    /* Navbar */
    .navbar {
      background-color: dodgerblue;
      color: #fff;
    }

    .navbar-brand {
      font-size: 24px;
    }

    .navbar-nav .nav-item .nav-link {
      color: grey;
    }

    /* Nav Tabs */
    .nav-tabs .nav-link {
      background-color: dodgerblue;
      color: #fff;
    }

    .nav-tabs .nav-link.active {
      background-color: dodgerblue;
      color: #fff;
    }
  </style>
</head>
<body>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg bg-primary">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Video Conference Logon</a>
  </div>
</nav>

  <a class="text-center" href="https://screenapp.io/app/#/dashboard" class="underlined-link">To Record the session please use this online platform</a>
<div class="container-fluid " >
  <ul class="nav d-flex justify-content-center nav-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link btn-xl active " id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">Conference</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="false">Scheduled Meeting</button>
    </li>
  </ul>
  <div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
      <div class="container">
        <div class="image-container">
          <img src="/images/infinite_knowledge_by_softwmaster_dg7ofqu-fullview.jpg" alt="Background Image">
        </div>

        <div class="main">
          <div class="new-meeting">
            <button class="btn btn-success" id="newMeetingBtn">Create a New Meeting</button>

            <button type="button" class="btn btn-primary" style="margin-top: 5%" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
              Schedule Video Conference
            </button>
            <!-- Modal -->
            <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
              <div class="modal-dialog modal-xl">
                <form id="meetingForm" >
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="staticBackdropLabel">Enter Details</h5>
                    </div>
                    <div class="modal-body">
                      <div class="container-fluid" >
                        <h2>Schedule a Video Conference</h2>
                        <div class="mb-3">
                          <label for="meetingTitle" class="form-label">Meeting Title</label>
                          <input type="text" class="form-control" name="meetingTitle" id="meetingTitle" placeholder="Enter meeting title" required>
                           </div>
                        <div class="mb-3">
                          <label for="meetingDate" class="form-label">Meeting Date</label>
                          <input type="date" class="form-control" name="meetingDate"  id="meetingDate" required>
                        </div>
                        <div class="mb-3">
                          <label for="meetingTime" class="form-label">Meeting Time</label>
                          <input type="time" class="form-control" name="meetingTime" id="meetingTime" required>
                        </div>
                        <div class="mb-3">
                          <label for="meetingURL" class="form-label">Meeting URL</label>
                          <input type="url" class="form-control" name="meetingURL" id="meetingURL" placeholder="Enter meeting URL" required>
                        </div>

                        <div class="mb-3">
                          <label for="agenda" class="form-label">Agenda</label>
                          <textarea class="form-control" id="agenda" name="agenda"  rows="4" placeholder="Enter meeting agenda"></textarea>
                        </div>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="submit" class="btn btn-primary">Schedule Video Conference</button>
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
          <div class="join-meeting">
            <input type="text" placeholder="Meeting ID" id="meetingName">
            <button id="joinMeetingBtn">Join</button>
          </div>
        </div>
        <div class="connected-users">
          <button id="logoutBtn">Logout</button>
          <h2>Connected Users</h2>
          <ul id="userList"></ul>
        </div>
      </div>
    </div>
    <div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0"><div class="container-fluid">
      <h1 class="text-center">Welcome to App</h1>
        <h1>Meeting List</h1>
        <table class="table">
          <thead>
          <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Scheduled Date & Time</th>
            <th>Participants</th>
          </tr>
          </thead>
          <tbody id="meeting-list">
          <!-- Meeting items will be added here dynamically -->
          </tbody>
        </table>
      </div>
      </div>
      </div>

  </div>




<script>
fetchMeetings();
  // Function to fetch and display meetings
  function fetchMeetings() {
    // Make an AJAX request to your API endpoint
    fetch('http://localhost:8080/api/v1/users/meetings')
            .then(response => response.json())
            .then(data => {
              const meetingList = document.getElementById('meeting-list');

              // Clear existing meeting items
              meetingList.innerHTML = '';

              // Iterate through the retrieved meetings and create rows
              data.forEach(meeting => {
                const row = document.createElement('tr');
                row.innerHTML = `
                            <td>${meeting.title}</td>
                            <td>${meeting.description}</td>
                            <td>${meeting.scheduledDateTime}</td>
                            <td>${meeting.participants.join(', ')}</td>
                        `;
                meetingList.appendChild(row);
              });
            })
            .catch(error => {
              console.error('Error fetching meetings:', error);
            });
  }

</script>
<script src="/js/index.js"></script>
<script src="/js/meeting.js"></script>
</body>
</html>
